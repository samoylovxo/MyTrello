!function(){"use strict";var e,t={6522:function(){function e(e,t,r,n,o,i,s){try{var a=e[i](s),l=a.value}catch(e){return void r(e)}a.done?t(l):Promise.resolve(l).then(n,o)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function n(e){var r=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";t(this,n),"string"==typeof e&&(this.element=document.querySelector(e)),this.contentType=o,this.activeDragCard=void 0,this.todoCards=[],this.progressCards=[],this.doneCards=[],this.form=this.element.querySelector(".trello__form"),this.btnAddCard=this.element.querySelector(".btn-add-card"),this.btnOpenForm=this.element.querySelector(".btn-open-form"),this.btnCloseForm=this.element.querySelector(".btn-close-form"),this.formInput=this.element.querySelector(".trello__form-input-img"),this.formDesc=this.element.querySelector(".trello__form-desc"),this.todoRow=this.element.querySelector(".todo-row"),this.progressRow=this.element.querySelector(".progress-row"),this.doneRow=this.element.querySelector(".done-row"),this.rows=this.element.querySelectorAll(".trello__card-row"),this.inputOverlay=this.element.querySelector(".trello__form-input-overlay"),this.init=this.init.bind(this),this.createCard=this.createCard.bind(this),this.stopSendForm=this.stopSendForm.bind(this),this.openFormForAddCard=this.openFormForAddCard.bind(this),this.closeFormForAddCard=this.closeFormForAddCard.bind(this),this.onUpload=this.onUpload.bind(this),this.handlerLoad=this.handlerLoad.bind(this),this.removeInvalid=this.removeInvalid.bind(this),this.onDragOver=this.onDragOver.bind(this),this.onDragDrop=this.onDragDrop.bind(this),this.removeCardItem=this.removeCardItem.bind(this),this.onStartDrag=this.onStartDrag.bind(this),this.onEndDrag=this.onEndDrag.bind(this),this.onDrag=this.onDrag.bind(this),this.saveLocalStorage=this.saveLocalStorage.bind(this),this.form.addEventListener("submit",this.stopSendForm),this.btnAddCard.addEventListener("click",this.createCard),this.btnOpenForm.addEventListener("click",this.openFormForAddCard),this.btnCloseForm.addEventListener("click",this.closeFormForAddCard),this.formInput.addEventListener("change",this.onUpload),this.formDesc.addEventListener("focus",this.removeInvalid),this.inputOverlay.addEventListener("dragover",this.onDragOver),this.inputOverlay.addEventListener("drop",this.onDragDrop),this.rows.forEach((function(e){return e.addEventListener("mousedown",r.onStartDrag)})),this.init()}var o,i,s,a,l;return o=n,(i=[{key:"init",value:function(){var e=this,t=JSON.parse(localStorage.getItem("rows"));if(t){var r=t.todoCards,n=t.progressCards,o=t.doneCards;this.todoRow.insertAdjacentHTML("beforeend",r),this.progressRow.insertAdjacentHTML("beforeend",n),this.doneRow.insertAdjacentHTML("beforeend",o),this.btnRemoveItem=this.element.querySelectorAll(".trello__item-remove"),this.btnRemoveItem.forEach((function(t){return t.addEventListener("click",e.removeCardItem)}))}}},{key:"removeInvalid",value:function(){this.formDesc.classList.remove("invalid")}},{key:"stopSendForm",value:function(e){e.preventDefault()}},{key:"onDragOver",value:function(e){e.preventDefault()}},{key:"onDragDrop",value:function(e){e.preventDefault(),this.onUpload({target:e.dataTransfer})}},{key:"createCard",value:function(){var e,t=this;if(!this.formDesc.value&&this.imageSrc&&(e='<div class="trello__card-item">\n                <span class="trello__item-remove"></span>\n                <div class="trello__card-img">\n                  <img src="'.concat(this.imageSrc,'" alt="card-image" />\n                </div>\n            </div>')),!this.imageSrc&&this.formDesc.value&&(e='<div class="trello__card-item">\n                <span class="trello__item-remove"></span>\n                <p class="trello__card-text">'.concat(this.formDesc.value,"</p>\n            </div>")),this.imageSrc&&this.formDesc.value&&(e='<div class="trello__card-item">\n                <span class="trello__item-remove"></span>\n                <div class="trello__card-img">\n                  <img src="'.concat(this.imageSrc,'" alt="card-image" />\n                </div>\n                <p class="trello__card-text">').concat(this.formDesc.value,"</p>\n            </div>")),e){this.closeFormForAddCard(),this.todoRow.insertAdjacentHTML("beforeend",e);var r=this.todoRow.children[this.todoRow.children.length-1];this.todoCards.push(r.outerHTML),this.saveLocalStorage(),this.btnRemoveItem=this.element.querySelectorAll(".trello__item-remove"),this.btnRemoveItem.forEach((function(e){return e.addEventListener("click",t.removeCardItem)}))}else this.formDesc.classList.add("invalid")}},{key:"openFormForAddCard",value:function(){this.form.classList.add("show"),this.btnOpenForm.classList.add("hidden")}},{key:"closeFormForAddCard",value:function(){this.form.classList.remove("show"),this.btnOpenForm.classList.remove("hidden"),this.formDesc.value="",this.formInput.value="",this.imageSrc=""}},{key:"onUpload",value:function(e){var t=this,r=e.target,n=r.files&&r.files[0];if("file"!==this.contentType){var o=new FileReader;o.addEventListener("load",(function(e){t.handlerLoad(e.target.result,n)})),"text"===this.contentType&&o.readAsText(n),"image"===this.contentType&&o.readAsDataURL(n)}else{var i=URL.createObjectURL(n);this.handlerLoad(i,n)}}},{key:"handlerLoad",value:function(e){this.imageSrc=e}},{key:"removeCardItem",value:function(e){var t=e.target.closest(".trello__card-item");t.remove(),t.querySelector(".trello__item-remove").removeEventListener("click",this.removeCardItem),this.saveLocalStorage()}},{key:"onStartDrag",value:function(e){var t=e.target;if(!t.classList.contains("trello__item-remove")){this.activeDragElement=t.closest(".trello__card-item");var r,n=this.activeDragElement&&this.activeDragElement.closest(".trello__card-row");n.classList.contains("todo-row")&&(r=this.todoCards.indexOf(this.activeDragElement),this.todoCards.splice(r,1)),n.classList.contains("progress-row")&&(r=this.progressCards.indexOf(this.activeDragElement),this.progressCards.splice(r,1)),n.classList.contains("done-row")&&(r=this.doneCards.indexOf(this.activeDragElement),this.doneCards.splice(r,1)),this.activeDragElement&&this.activeDragElement.classList.add("dragged"),document.documentElement.addEventListener("mouseup",this.onEndDrag),document.documentElement.addEventListener("mousemove",this.onDrag),this.onDrag(e)}}},{key:"onEndDrag",value:function(e){if(this.activeDragElement){var t=document.elementFromPoint(e.clientX,e.clientY),r=t.closest(".trello__card-item"),n=t.closest(".trello__card-row");this.activeDragElement.classList.remove("dragged"),n&&n.appendChild(this.activeDragElement),r&&r.insertAdjacentElement("afterend",this.activeDragElement),n.classList.contains("todo-row")&&this.todoCards.push(this.activeDragElement.outerHTML),n.classList.contains("progress-row")&&this.progressCards.push(this.activeDragElement.outerHTML),n.classList.contains("done-row")&&this.doneCards.push(this.activeDragElement.outerHTML),this.saveLocalStorage(),this.activeDragElement.style="",this.activeDragElement=void 0}document.documentElement.removeEventListener("mouseup",this.onEndDrag),document.documentElement.removeEventListener("mousemove",this.onDrag)}},{key:"onDrag",value:function(e){var t=this;if(e.preventDefault(),this.activeDragElement){var r=document.elementFromPoint(e.clientX,e.clientY);r.classList.contains("trello__card-item")&&(r.addEventListener("mouseover",(function(){t.activeDragElement&&(r.style.marginBottom="".concat(t.activeDragElement.offsetHeight,"px"))})),r.addEventListener("mouseout",(function(){r.style.marginBottom=""})),r.addEventListener("mouseup",(function(){r.style.marginBottom=""}))),this.activeDragElement.style.left="".concat(e.clientX+window.scrollX,"px"),this.activeDragElement.style.top="".concat(e.clientY+window.scrollY,"px")}}},{key:"saveLocalStorage",value:(a=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.querySelectorAll(".trello__card-item").forEach((function(e){return e.style=""})),localStorage.setItem("rows",JSON.stringify({todoCards:this.todoRow.innerHTML,progressCards:this.progressRow.innerHTML,doneCards:this.doneRow.innerHTML}));case 3:case"end":return e.stop()}}),e,this)})),l=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=a.apply(t,r);function s(t){e(i,n,o,s,l,"next",t)}function l(t){e(i,n,o,s,l,"throw",t)}s(void 0)}))},function(){return l.apply(this,arguments)})}])&&r(o.prototype,i),s&&r(o,s),n}();window.trello=new n(".trello","image")}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,n),i.exports}n.m=t,e=[],n.O=function(t,r,o,i){if(!r){var s=1/0;for(c=0;c<e.length;c++){r=e[c][0],o=e[c][1],i=e[c][2];for(var a=!0,l=0;l<r.length;l++)(!1&i||s>=i)&&Object.keys(n.O).every((function(e){return n.O[e](r[l])}))?r.splice(l--,1):(a=!1,i<s&&(s=i));if(a){e.splice(c--,1);var d=o();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[r,o,i]},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={179:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,i,s=r[0],a=r[1],l=r[2],d=0;if(s.some((function(t){return 0!==e[t]}))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(l)var c=l(n)}for(t&&t(r);d<s.length;d++)i=s[d],n.o(e,i)&&e[i]&&e[i][0](),e[s[d]]=0;return n.O(c)},r=self.webpackChunk=self.webpackChunk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),n.O(void 0,[202],(function(){return n(1202)}));var o=n.O(void 0,[202],(function(){return n(6522)}));o=n.O(o)}();